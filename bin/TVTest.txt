

    TVTest ver.0.5.22


◆ はじめに

  TVTest は、BonDriver を使用したテレビ視聴プログラムです。
  BonTest の UI を書き直し、BonTsEngine を改造し、リモコンや内蔵カードリーダの
  対応など HDUS 向けの機能を追加しています。

  まだ動作が不安定な部分もありますので、人柱版となっています。

  ご使用前にこのドキュメントに目を通してください。
  特に何か問題が起きた場合は、「ヒント」の部分を参照してください。


◆ 動作環境

  ・Windows 2000/XP/Vista
    (Windows 2000 に関しては私の方で環境がないため、直接動作確認はしていません)


◆ ファイル構成

  ・TVTest.exe            本体
  ・TVTest.txt            このファイル
  ・TVTest.chm            ヘルプファイル
  ・TVTest.sample.ch      チャンネル設定ファイルのサンプル
  ・TVTest_Image.dll      画像保存用 DLL
  ・TVTest_KeyHook.dll    キーフック用 DLL
  ・TVTest_Logo.bmp       ロゴ画像
  ・TVTest_0.5.22_Src.zip ソースファイル
  ・TVTest_SDK_081214.zip プラグイン開発用 SDK
  ・EpgDataCap.dll        EPG 用 DLL (EpgDataCapの中の人氏作)
  ・BonDriver_UDP.dll     UDP 受信用 BonDriver (ver1.20)
  ・Preset_BS.ch2         BS 用チャンネルプリセット
  ・Preset_CS.ch2         CS 用チャンネルプリセット
  ・Plugins\              プラグインフォルダ
                          (SDK にあるサンプルがいくつか入っています)
  ・Themes\               配色設定フォルダ

  起動すると、本体のあるフォルダに以下のファイルが作成されます。

  ・TVTest.ini     設定ファイル
  ・TVTest.ch.ini  チャンネル情報(人が見て意味のあるものではありません)
  ・EpgData        EPG データ(設定により違うフォルダに作成したり、作成しないよ
                   うにすることも可能です)


◆ 導入

  実行には Visual C++ 2005 SP1 のランタイムが必要ですので、もしお使いのシステム
  に入っていない場合は別途入手してください。以下のページからダウンロードできま
  す。
  http://www.microsoft.com/downloads/details.aspx?displaylang=ja&FamilyID=200b2fd9-ae1a-4a14-984d-389c36f85647

  ・単体で視聴する場合

    TVTest で実際に視聴を行うには、BonDriver が必要です。
    使用するチューナーに対応した BonDriver を、DTV関係ツール
    (http://2sen.dip.jp/dtv/)のアップローダからからダウンロードして、
    BonDriver_*.dll を TVTest.exe と同じフォルダに入れます。

    使用する BonDriver は設定ダイアログで指定するか、コマンドラインで
    /d BonDriver.dll のように指定します。

  ・EpgDataCap_Bon や cap_hdus GUI+ などから呼び出して視聴する場合

    呼び出し側のプログラムで、視聴プログラムを

      "TVTestのあるフォルダ\TVTest.exe" /nd /d BonDriver_UDP.dll

    のように設定します。

  次に、TVTest を起動したら、チャンネルスキャンを実行して視聴可能なチャンネルを
  検索します。
  チャンネルスキャンを実行するには、右クリックメニューから [設定] を選択して設
  定ダイアログを表示させ、左のリストから [チャンネルスキャン] を選択します。
  [スキャン開始] ボタンを押すとチャンネルスキャンが始まります。チャンネルスキャ
  ンには数分掛かります。
  深夜などで停波している局は検索できませんので注意してください。

  使用しているチューナーが複数のチューニング空間に対応している場合は、チューニ
  ング空間ごとにスキャンを行う必要があります。

  視聴可能なチャンネルが既に分かっている場合は、チャンネルスキャンを行わずに、
  チャンネル設定ファイルを直接作成して使用することもできます。
  チャンネル設定ファイルの形式は cap_hdus や cap_hdus GUI+ と同じですので、それ
  らのプログラムで使用していたファイルを流用することができます。

  チャンネル設定ファイルを書く場合は、使用する BonDriver と同じベース名で拡張子
  が .ch のテキストファイルを BonDriver と同じフォルダに作成して、そこにチャン
  ネルの設定をに書きます。例えば、BonDriver_HDUS.dll のチャンネル設定ファイルは
  BonDriver_HDUS.ch とします。
  チャンネル設定ファイルは一行に、

    局名,リモコン番号,チャンネル

  という形で記述します。例えば、NHK,1,27 のように書きます。ケーブルテレビの場合
  はチャンネルの前に C を書いて C27 のようにします。
  TVTest.sample.ch ファイルに設定例がありますので、参考にしてください。
  また、BS/CS 放送の設定例もあります。
  チャンネル設定を書く際は、こちらのページが参考になると思います。
  http://www.sknet-web.co.jp/support/faq/sk07110201.mht (IE 専用)
  http://ja.wikipedia.org/wiki/%E3%83%86%E3%83%AC%E3%83%93%E5%91%A8%E6%B3%A2%E6%95%B0%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB

  チャンネルファイルが存在しない場合は、全てのチャンネルから選択するようになり
  ます。

  BonDriver に対応したチャンネルファイルが存在しない場合で、TVTest.exe と同じ
  フォルダに TVTest.ch という名前のチャンネルファイルが存在する場合は、そちらが
  デフォルトとして利用されます。


◆ 使い方

  下の方にあるステータスバーをクリックすると色々できます。
  デフォルトでは左から順に、チャンネル、映像の大きさ(表示倍率)、音量、音声、録
  画、キャプチャ、エラーです。
  各項目のマウスクリック時に割り当てられた機能は以下の通りです。

                 左クリック              右クリック

  チャンネル    チャンネル選択          サービス選択
  映像の大きさ  表示倍率選択            アスペクト比選択
  音量          音量の変更              消音
  音声          ステレオモード切り替え  ステレオモード選択
  録画          録画開始/停止           録画メニュー
  キャプチャ    キャプチャ実行          キャプチャメニュー

  エラーの部分は D がドロップ(連続性エラー)パケット数、E がその他エラーパケット
  数、S が復号漏れパケット数です。
  その他に、現在の時間を表示する時計、視聴中の番組情報、バッファの使用割合が表
  示できます。
  バッファの使用割合は、R が BonDriver のバッファ残りブロック数(ブロックのサイ
  ズはドライバによって異なる)、B が TVTest のバッファ使用率です。

  ステータスバーのチャンネル/音量/音声の各項目にフォーカスがある状態でホイール
  を使用すると、その項目に合わせた動作をします。

  ステータスバーの項目の順序、表示/非表示、大きさは設定で変更することができます。

  画面を右クリックすると普通にメニューが出ます。
  画面をダブルクリックするとフルスクリーン表示になります。

  ウィンドウを Shift キーを押しながらリサイズすると、ウィンドウサイズが画面のア
  スペクト比に合わせて調整されます。
  また、設定で Shift キーを押さずにアスペクト比に合わせるようにすることもできま
  す。

  使い方についてより詳しくはヘルプを参照してください。


◆ EPG 番組表の使い方

  右クリックメニューから [EPG番組表] を選択するか、リモコンの [EPG] ボタンを押
  すと、EPG 番組表が表示されます。

  番組表で右クリックしたメニューから [番組表の取得開始] を選択すると、各チャン
  ネルの番組表を取得します。
  EPG 情報の取得は視聴中も行っていますので、既に視聴したチャンネルの番組表は最
  初から表示されます。

  番組表の一番上のチャンネル名をクリックすると、そのチャンネルに切り替えられま
  す。


◆ ヒント

  ・音声だけ出て映像が出ない
    MPEG-2 のコーデックを入れます。また、コーデックによっては動作しませんので注
    意してください。設定のデコーダの部分で、ちゃんと動作するデコーダを選択して
    ください。
    MPV Decoder Filter か ATI Mpeg Decoder Filter が動作確認がとれているので確
    実だと思います。

  ・録画した番組を再生すると違う番組が再生される
  ・BS2 を録画したのに BS1 が録画されている
    一つのチャンネルに複数のサービスが含まれています。
    録画の設定で「現在のサービスのみ録画する」のチャックを入れるか、TsSplitter
    で分離するなどしてください。

  ・UDP で複数起動できない
    ポートをデフォルトの1234のままにすると、複数起動時にエラーが出ます。
    (BonDriver_UDP で最初にポート1234を bind するために、既に使われているとエ
    ラーになる)
    コマンドラインで /port 1235 などとして、デフォルトのポートを1234以外に設定
    します。

  ・「BonDriverの初期化ができません」と表示される
    BonDriver からエラーが返ってきたためです。
    具体的にどのようなエラーが起こったのかを、呼び出し元のプログラムから知る方
    法はありません。
    大抵の場合、デバイスが認識されていないか既に使用中だと思われます。

  ・NHK教育/放送大学で映像が正方形に表示される
    CyberLink 等のデコーダとデフォルトレンダラの組み合わせで起こるようです。
    レンダラをデフォルト以外にしてみてください。

  ・キャプチャで固まる
    レンダラに VMR9 Renderless を使用してください。

  ・音量を最大にしても音が小さい
    右クリックメニューから [音量] -> [音量増幅] を選択してください。

  ・メモリ使用量が多い
    メモリを使っているのは DirectShow の部分(主に MPEG-2 デコーダ)ですので、私
    にはどうしようもありません。
    MPEG-2 デコーダで DxVA を使用するとやたらにメモリ使用量が増えるので、オフに
    するか、DxVA を使用しないデコーダにしてみてください。
    録画のみ行う場合は、コマンドラインオプションで /nodshow を指定すると、メモ
    リ使用量がかなり少なくなります。

  ・かくつく・音ずれする
    右クリックメニューから [リセット] で直ることもあります(ただし、固まることも
    ある)。
    また、INI ファイルの [Settings] に UseAudioRendererClock=no と指定すると改
    善することもあります。

  ・ネットワークリモコンが使えない/リモコンの番号がおかしい
    EpgDataCap_Bon のチャンネルファイルのパスを正しく設定します(詳しくはヘルプ
    参照)。
    ファイアフォールにブロックされている可能性もあるので確認します。

  ・起動時にアンチウィルスソフトが反応する
    アクティブでない時もリモコンを使えるようにするためにキーボードフックを使用
    していますが、これはキーロガー等にも使われるためにアンチウィルスソフトが反
    応してしまうことがあります。
    アンチウィルスソフトで除外設定するか、設定でアクティブ時のみリモコンを使用
    するようにします。

  ・ブルースクリーンが出る
    Windows 2000/XP/Vista でブルースクリーンが出るのは、ほとんどの場合ハードか
    ドライバの問題です。


◆ デフォルトのキーボード操作

  F1〜F12 or 1〜9/0  チャンネル選択
  ←→               チャンネル-+
  ↑↓               音量+-
  Alt+Enter          全画面表示
  R                  録画
  S                  ステレオモード切替
  A                  アスペクト比切替
  I                  情報ウィンドウ表示
  E                  EPG 番組表表示
  T                  常に最前面に表示
  C                  画面コピー


◆ HDUSリモコン操作

  画面表示    パンスキャン切替
  電源        終了
  消音        消音
  1〜12       チャンネル選択
  音量+-      音量
  チャンネル  チャンネル送り
  メニュー    メニューの表示
  全画面表示  全画面表示
  音声切替    音声切替
  EPG         EPG 番組表の表示
  録画        録画開始
  メモ        画面キャプチャ
  停止        録画停止
  一時停止    録画一時停止

  TVTest がアクティブでない場合、音量とチャンネルの上げ下げは使えません。


◆ コマンドラインオプション

  /ch             チャンネルの指定(物理チャンネル番号) (e.g. /ch 13)
  /rch            チャンネルの指定(リモコンチャンネル番号) (e.g. /rch 3)
  /chspace        チューニング空間の指定(BonDriver でのインデックス)
                  (e.g. /chspace 1)
  /sid            サービスIDの指定 (e.g. /sid 1024)
  /nid            ネットワークIDの指定 (e.g. /nid 32736)
  /tsid           トランスポートストリームIDの指定 (e.g. /tsid 32736)
  /d              ドライバの指定 (e.g. /d BonDriver.dll)
  /fullscreen /f  全画面表示
  /ini            INI ファイル名の指定 (e.g. /ini TVTest2.ini)
  /init           初期設定ダイアログを表示する
  /log            終了時にログを保存する
  /min            最小化状態で起動する
  /nd             スクランブル解除しない
  /nodriver       BonDriver を読み込まない
  /nodshow        起動時に DirectShow を初期化しない
                  視聴せずに録画のみ行う場合に指定すると、メモリ使用量がかなり
                  減ります
                  メニューの[画面表示オフ]のチェックを外せば、途中から視聴する
                  ことも可能です(/noview も暗黙的に指定されます)
  /noplugin       プラグインを読み込まない
  /noview         起動時画面表示オフ
  /nr             ネットワークリモコンを使用する
  /port /p        UDP のポート番号 (e.g. /port 1234)
  /rec            起動時録画開始
  /recdelay       録画開始までの時間(秒単位) (e.g. /recdelay 60)
                  /rec が指定されていない場合は無視される
  /recduration    録画時間(秒単位) (e.g. /recduration 1800)
                  /rec が指定されていない場合は無視される
  /recexit        録画終了時にプログラムを終了
  /recfile        録画ファイル名 (e.g. /recfile "C:\ReocrdFiles\Record.ts")
                  /rec が指定されていない場合は無視される
  /s              TVTest が既に起動している場合、複数起動しない
  /silent         エラー時にダイアログを表示しない
  /standby        待機状態で起動する

  ※複数あるものはどちらでも可。/ の代わりに - でも可。

  おまけ
  udp://@:1234 のようなポート指定も可能です(なぜかこう指定すると思っている人が
  多いので)。


◆ EVR 使用時の注意

  MPEG-2 デコーダに MPV Decoder Filter を使用すると、画面が一瞬ブラックアウトし
  た後不正終了する現象が出ています。他のデコーダでは問題ないようです。
  EVR 使用時にキャプチャを行うと、画像が実際に表示されている大きさで取得されま
  す。画像の大きさを「表示されている大きさ」にしていないと、画質が悪くなります。


◆ 注意事項

  オリジナルの BonTest の注意事項に準拠します。


◆ ライセンス

  ・このプログラムは GPL 扱いとします。
  ・このプログラムの使用及び使用不能によって生じたいかなる損害も補償しません。
  ・このプログラムは FAAD2 を使用しています。
    Code from FAAD2 is copyright (c) Nero AG, www.nero.com
  ・このプログラムは宮坂賢氏の作成された libjpeg の SIMD 対応版を使用しています。
    libjpeg 6b  Copyright (C) 1991-1998, Thomas G. Lane.
      This software is based in part on the work of the Independent JPEG Group.
    Independent JPEG Group's JPEG software release 6b
      with x86 SIMD extension for IJG JPEG library version 1.02
  ・このプログラムは libpng を使用しています。
    libpng 1.2.31  Copyright (c) 1998-2001 Glenn Randers-Pehrson
  ・このプログラムは zlib を使用しています。
    zlib version 1.2.3  Copyright (C) 1995-2004 Jean-loup Gailly and Mark Adler
  ・EpgDataCap.dll は、EpgDataCap_Bon(人柱版８.５６) に付属のもので、
    EpgDataCapの中の人 氏が著作権を有しています。
  ・BonDriver_UDP.dll は Meru-co 氏が書かれたソースを VC2005 でビルドしたもので
    す。Meru-co 氏の BonDriver(Meru customize edition) for UDP ver1.20 と機能的
    に同一のものです。


◆ 謝辞

  オリジナルの BonTest の作者である 拡張ツール中の人 氏と、改造版の作者である
  Meru-co 氏に感謝します。


◆ ソースについて

  VC2005 でビルドしています。ビルドには FAAD2 ライブラリが必要です。
  TVTest_Image.dll のビルドには libjpeg/libpng/zlib の各ソースファイルが必要で
  す。


◆ 更新履歴

  ver.0.5.22
    ・リモコンのキー割り当てをカスタマイズできるようにした
    ・ドライバにショートカットキーを割り当てられるようにした
    ・EVR で、偽でない OSD 表示ができるようにした
    ・リモコン番号が設定されていない場合もチャンネル送りができるようにした
    ・ver.0.5.21 で、上側にスナップしなくなった不具合を修正
    ・その他微修正

  ver.0.5.21
    ・プラグイン/チューニング空間/サービスにショートカットキーを割り当てられる
      ようにした
    ・キー割り当ての設定で、アクティブでない時も有効にできるようにした
    ・ドライバ毎に初期チャンネルを設定できるようにした
    ・チャンネルスキャン時に BS/CS はプリセットを読み込めるようにした
    ・番組の切り替わり時に番組名を表示できるようにした
    ・ログをより細かく記録するようにした
    ・待機状態への移行時に、ドライバをアンロードするようにした
    ・ファイル書き込み時のバッファリングができていなかった不具合を修正
    ・ウィンドウの端にスナップするようにしている時、下側がスナップしない不具合
      を修正
    ・番組情報の表示で、1月と2月は曜日がおかしくなる不具合を修正
    ・その他微修正

  ver.0.5.20
    ・コマンドラインオプションの INI ファイルの指定ができない不具合を修正

  ver.0.5.19
    ・EVR のフリッカ対策を変更した
    ・コマンドラインオプションの INI ファイルの指定で、ディレクトリを指定しない
      場合に Windows ディレクトリがサーチパスになっていた不具合を修正

  ver.0.5.18
    ・レンダラに EVR を利用できるようにした
      (MPV Decoder Filter を使用すると問題あり)
    ・INI ファイルのファイル名を指定するコマンドラインオプション /ini を追加した
    ・ファイル書き込み時のバッファサイズを設定できるようにした
    ・音量上げ下げ時の単位を設定できるようにした
    ・パネルウィンドウの透明度を設定できるようにした
    ・サスペンド移行時にチューナーを閉じるようにした
    ・待機状態からの復帰時にチャンネルが復元されない不具合を修正
    ・EpgDataCap.dll を同梱した(恐らくもう更新されないので)
    ・その他微修正

  ver.0.5.17
    ・パケットのパース処理を暫定的に ver.0.5.15 より前に戻した
    ・ver.0.5.15 以降で、キー割り当ての設定でキーボードでのチャンネル切り替えの
      設定ができない不具合を修正

  ver.0.5.16
    ・ver.0.5.15 で、エラーのパケットがあるとパケットのパース処理がうまくいかな
      くなることがある不具合を修正

  ver.0.5.15
    ・キー割り当てのカスタマイズができるようにした
    ・現在のサービスのみ保存時に、字幕とデータカルーセルを保存するかしないか選
      択できるようにした
    ・実行時にログをファイルに書き出せるようにした
    ・情報ウィンドウにエラー表示を追加した
    ・VMR-7 で、偽でない OSD 表示をできるようにした
    ・いくつかの設定を移動した
    ・全画面表示時にステータスバー上にカーソルがある時、カーソルが消える不具合
      を修正
    ・プラグイン関係のいくつかの不具合を修正
    ・その他微修正

  ver.0.5.14
    ・現在のサービスのみ録画時に、PAT の書き換えが機能していなかった不具合を修
      正
    ・リモコンを有効にしていないと、Alt+Enter で全画面表示できない不具合を修正
    ・チャンネルスキャンで、チャンネルの削除のみ行っても反映されない不具合を修
      正
    ・配色の設定で、プリセットを保存した後で正しくプリセットを選択できなくなる
      ことがある不具合を修正
    ・その他微修正

  ver.0.5.13
    ・ステータスバーのエラー表示で、ドロップを他のエラーと分けて表示するように
      した
    ・フィルタグラフへのストリームの入力を別スレッドから行うようにした
    ・プラグインの有効状態を記憶するようにした
    ・コマンドラインオプションにチューニング空間の指定を追加した
    ・プラグインヘッダ更新
    ・その他微修正

  ver.0.5.12
    ・最小化時に再生を停止するかしないかを設定できるようにした

  ver.0.5.11
    ・最小化状態での起動時に、パネルだけ表示されたり、最小化時にタスクトレイに
      格納するようにしていてもタスクバーに表示されてしまうなど、細かい不具合が
      いろいろあったのを修正
    ・(再)最小化から復帰時にプレビューが再開されない不具合を修正

  ver.0.5.10
    ・デュアルモノラル時に自動的に主音声に切り替わるようにした
    ・最後に表示したチャンネルをドライバ毎に保存するようにした
    ・最小化時にタスクトレイに格納できるようにした
    ・最小化状態で起動するコマンドラインオプションを追加した
    ・録画開始時にエラーカウントをリセットするようにした
    ・メニューのチャンネル数が100より多いと正しく選局できなくなる不具合を修正
    ・その他微修正

  ver.0.5.9
    ・ver.0.5.6 以降で、チャンネル切り替えに一秒以上かかるとストリームの受信を
      停止する不具合を修正
    ・ネットワークリモコンの使用時に、コマンドラインのリモコン番号の指定が使用
      できるようにした
    ・ver.0.5.6 以降で、先頭でないサービスの選択がうまくいかない不具合を修正
    ・VMR-9 Renderless 使用時に、映像の大きさが変になることがある不具合を修正
    ・ver.0.5.2 での音ずれ対策を無効にできるようにした
      (INI ファイルに UseAudioRendererClock=no と書くと、ver.0.5.2 より前と同様
      になります)

  ver.0.5.8
    ・ver.0.5.6 以降で、サービス構成の変化時に不正な処理になることがある不具合
      を修正
    ・F10 キーが効かない不具合を修正
    ・ステータスバーとタイトルバーを両方非表示にしている時、起動時にステータス
      バーが二重に表示される不具合を修正
    ・その他微修正

  ver.0.5.7
    ・複数の音声ストリームがある時、ステータスバーの音声の部分のクリック及びリ
      モコンの音声切替で切り替えられるようにした
    ・ステータスバーのエラーの部分をクリックするとリセットされるようにした
    ・VMR-9 Renderless でのクロップ方法を変えた
    ・チャンネルスキャン時に生成されるチャンネルファイルが一部おかしかった不具
      合を修正
    ・待機時に EPG 情報を取得するようにしている場合、復帰時にチャンネルが一つず
      れる不具合を修正
    ・その他微修正

  ver.0.5.6
    ・レンダラに VMR-9 Renderless を追加した
    ・音声ストリームを選択できるようにした
    ・待機状態で起動するコマンドラインオプションを追加した
    ・外部からチャンネル変更された際に表示が変化するようにした
    ・キャプチャする画像の大きさを割合で指定できるようにした
      また、大きさの設定を設定ダイアログに移動した
      (キャプチャアイコンの右クリックメニューからは今まで通り変更可能)
    ・PCM セレクトフィルタの機能を AAC デコーダフィルタに統合した
    ・JPEG のライブラリを SIMD 対応版に差し替えた
    ・チャンネルの情報が正常に読み込まれていなかった不具合を修正
    ・パネルを右側にドッキングさせても、次回起動時に左側に表示される不具合を修
      正
    ・排他制御がおかしい箇所が多かったのを修正
    ・その他微修正

  ver.0.5.5
    ・ツールバーにチューナー選択用の項目を表示できるようにした
    ・録画時に現在のサービスのみ保存できるようにした
    ・EPG 番組表から登録したプログラムを実行できるようにした
    ・起動時に DirectShow の初期化を行わない等、いくつかのコマンドラインオプ
      ションを追加した
    ・チャンネル変更をストリーム受信スレッドで行うようにした
    ・プラグインのヘッダを更新、SDK のサンプルを追加した
    ・その他微修正

  ver.0.5.4
    ・プラグインを使用できるようにした
    ・録画の詳細指定で、開始時間を指定できるようにした
    ・コマンドラインオプションをいくつか追加した
    ・待機時に EPG 情報を取得する設定にしていると、復帰後も取得を継続する不具合
      を修正
    ・録画の詳細指定のダイアログで、何かファイル名を入力しないとキャンセルでき
      ない不具合を修正
    ・終了時にデッドロックする不具合を修正したつもり
    ・録画時に「ファイルへの書き出しでエラーが発生しました。」という嘘のダイア
      ログが出る不具合を修正したつもり
    ・その他微修正

  ver.0.5.3
    ・パンスキャン切り替え時にウィンドウサイズを維持する設定にしている場合でも、
      横幅は変更されるようにした
    ・ver.0.5.2 で、常駐モードにしても閉じると終了してしまう不具合を修正
    ・常駐からの復帰時にデッドロックする不具合を修正
    ・終了処理を少し変更
    ・その他微修正

  ver.0.5.2
    ・タイトルバー/ステータスバーを非表示にしている場合、マウスカーソルを上か下
      に持っていくとタイトルバー/ステータスバーが一時的に表示されるようにした
    ・ステータスバーを非表示にしていても、起動時には一時的に表示されるようにし
      た(起動時のメッセージを見られるようにするため)
    ・視聴中のサービスのみスクランブル解除するかしないかを設定で選択できるよう
      にした
    ・音ずれ対策をした
    ・EPG 番組表の設定が起動時に適用されない不具合を修正
    ・その他微修正

  ver.0.5.1
    ・使用する BonDriver をメニューから選択できるようにした
    ・キャプチャプレビューに画像のコピーと保存機能を追加した
    ・ネットワークリモコン使用時に利用するチャンネルファイルを自動的に取得でき
      るようにした
    ・HDUS リモコン使用時に読み込む DLL が HDUSTest_KeyHook.dll のままになって
      いた不具合を修正
    ・フィルタグラフの構築失敗時に具体的なエラーメッセージを表示する機能が働い
      ていなかった不具合を修正
    ・ヘルプ増補
    ・その他微修正

  ver.0.5.0
    ・HDUSTest から TVTest に改名した
    ・初回起動時に初期設定ダイアログを表示するようにした
    ・EPG 番組表のカスタマイズ機能を追加した
    ・EPG 番組表から iEPG 対応プログラムを関連付け実行できるようにした
    ・EPG 番組表をキーボードでスクロールできるようにした
    ・カードリーダーアクセスを別スレッドで行うようにした
    ・ステータスバーに BonDriver のバッファ残量を表示できるようにした
    ・録画時に現在のサービスのみスクランブル解除するオプションを追加した
      また、録画していない場合は視聴中のサービスのみスクランブル解除するように
      した
    ・チャンネル切り替えで直接サービスを選択する際に、サービスIDを元に行うよう
      にした
    ・フィルタグラフの構築失敗時に、具体的なエラーメッセージが表示されるように
      した
    ・簡単なヘルプを書いた
    ・ver.0.4.20 で、無音状態を解除しても音が出ない不具合を修正
    ・起動時にエラーが発生すると不正な処理になることがある不具合を修正
    ・その他微修正/ちょっとした機能追加

  ver.0.4.20
    ・BonDriver_UDP 使用時も番組表を表示できるようにした(取得はできません)
    ・チャンネルスキャン時に信号レベルを無視するオプションを追加した
    ・チャンネル切り替えで固まらない対策が働かないことがある不具合を修正
    ・ネットワークリモコン使用時にポートが切り替えられない不具合を修正
    ・その他微修正

  ver.0.4.19
    ・チャンネル切り替えで固まらないように対策をした
    ・録画中はステータスバーに録画時間を表示するようにした
    ・ソースファイルに HDUSTest_KeyHook.vcproj が欠けていたのと、VideoRenderer.h
      が古いままになっていたのを修正

  ver.0.4.18
    ・バッファサイズを変更すると不正な処理になる不具合を修正
    ・ver.0.4.17 で、Vista で常にビデオレンダラが VMR9 になる不具合を修正
    ・その他微修正

  ver.0.4.17
    ・左右どちらかの音のみの出力にすると音声がおかしくなる不具合を修正
    ・UDP の空きポートを探す処理がおかしかった不具合を修正
    ・ver.0.4.15 で、BonDriver_UDP 使用時にポート番号ではなくチャンネル名が出る
      ようになっていた不具合を修正
    ・EPG 番組表の更新が早くなるようにした
    ・添付の配色設定ファイルに EPG 番組表の設定を追加した
    ・その他微修正

  ver.0.4.16
    ・ステータスバーの設定画面を表示させると、閉じる際に不正な処理になる不具合
      を修正
    ・待機時に EPG 情報を取得するオプションが有効にならない不具合を修正
    ・BonDriver が見付からないと「"" をロードできません。」というメッセージが出
      る問題を修正

  ver.0.4.15
    ・チャンネルスキャン機能を追加した
    ・パケットのバッファリング機能を追加した
    ・再起動せずに BonDriver を切り替えられるようにした
    ・UDP での視聴時に、複数起動した場合は空いているポートを使用するようにした
    ・チャンネル選択メニューで、可能であれば放送中の番組名を表示するようにした
    ・録画の一時停止をできるようにした
    ・EPG 番組表の配色を設定できるようにした
    ・録画の際に既に同じ名前のファイルがある場合は連番を付加するようにした
    ・その他コードの整理/微修正たくさん

  ver.0.4.14
    ・EPG 番組表の表示機能を追加した(要 EpgDataCap.dll)
    ・ステータスバーの右クリック時に、チャンネルの部分でサービスの選択メニュー、
      映像サイズの部分でアスペクト比の選択メニューが出るようにした
    ・ver.0.4.12 以降で、キャプチャの設定が保存されなくなっていた不具合を修正
    ・ステータスバーの音量の項目の位置を変更すると、正しく音量が設定できなくな
      る不具合を修正
    ・ステータスバーのビットレート表示で、実際の 1/10000 の数が出るようになって
      いた不具合を修正
    ・その他微修正

  ver.0.4.13
    ・チャンネル切り替え時の安定性を上げる対策をした
    ・内蔵カードリーダー使用時に、一度スクランブル解除に失敗するとリカバリーで
      きなくなっていた不具合を修正
    ・スクランブル解除に失敗すると、その後のチャンネル変更やリセットで不正な処
      理になる不具合を修正
    ・その他微修正

  ver.0.4.12
    ・外部カードリーダーと内蔵カードリーダーを切り替えられるようにした
    ・使用する BonDriver によって、違うチャンネル設定ファイルを使えるようにした
    ・パンスキャンの切り替え時にウィンドウサイズを維持できるようにした
    ・全画面/最大化表示時に枠をカットして画面全体で表示できるようにした
    ・チャンネルの指定など、コマンドラインオプションを色々追加した
    ・表示倍率を 33%・66% にした時、正確に 1/3・2/3 になるようにした
    ・ver.0.4.4 以降で、複数起動を禁止した場合、複数起動時に常にダイアログが出
      るようになっていた不具合を修正
    ・その他微修正

  ver.0.4.11
    ・常駐モードを追加した
    ・ビデオレンダラの構築方法を変更した。ついでに VMR7 を使用できるようにした
    ・MPEG-2 デコーダの接続方法を ver.0.4.7 までのものに戻した
    ・5.1ch 音声のダウンミックスを整数演算で行うようにした
    ・設定ダイアログにログ表示を追加(録画のログしか出ません)
    ・最大化表示時にステータスバーの表示/非表示の切り替えができない不具合を修正
    ・最大化状態で終了した時に、次回起動時に復元されない不具合を修正
    ・スクリーンセーバーを無効にした場合、終了させても有効に戻らない不具合を修正
    ・その他微修正

  ver.0.4.10
    ・チューニング空間の切り替えができなくなっていた不具合を修正
    ・チャンネル設定ファイルがないとチャンネルが選択できなくなっていた不具合を
      修正
    ・現在選択されているサービスのメニューがチェックされない不具合を修正
    ・タイトルバーが表示されていない時は、最大化時の大きさを調整するようにした
    ・その他微修正

  ver.0.4.9
    ・タイトルバーを消した際にタスクバーの右クリックメニューで最小化と最大化が
      無効になる問題に対処
    ・ケーブルテレビ環境でチャンネルの初期状態がおかしい不具合を修正
    ・チャンネル切り替えの先行表示ができなくなっていた不具合を修正
    ・フルスクリーン時のステータスバー上で、マウスホイールの操作ができない不具
      合を修正
    ・フルスクリーン時にステータスバーを表示させたまま通常表示に戻すと、ステー
      タスバーが消える不具合を修正
    ・ステータスバーの音量部分の右クリックの動作を消音に戻した
    ・その他微修正

  ver.0.4.8
    ・パネルを本体とドッキングできるようにした
    ・パネルの位置を本体と連動して移動させられるようにした
    ・チャンネル関係の処理の見直しをした
      ・BonDriver_HDUS に決め打ちしていた部分を汎用的になるように修正
        (今まで HDUS か白凡用以外の BonDriver を使用していた場合は、チャンネル
         設定ファイルの書き換えが必要です)
      ・実質的に機能していなかったチューニング空間の変更をできるようにした
    ・画面表示をオフにできるようにした
    ・音声サンプルをいじって音量を大きくできるようにした
    ・配色を指定できる項目を増やした。また、配色の設定を保存/読み込みできるよう
      にした
    ・フルスクリーン時にカーソルを下の方に持っていくとステータスバーが表示され
      るようにした
    ・EpgDataCap.dll のパスを指定できるようにした
    ・BonTest Ver.1.41m8 までの DtvEngine と MediaViewer の修正を一部取り込み
    ・同梱の BonDriver_UDP.dll を自前でビルドしたものに差し替え
    ・その他微修正

  ver.0.4.7
    ・チャンネル切り替え時に、番組表の EPG データの取得まで少し待つようにした
    ・番組の放送時間が変わっても番組表が更新されない不具合を修正
    ・ステータスバーのカスタマイズで、順序を変更するとおかしくなる不具合を修正
    ・超額縁表示時にキャプチャ画像の切り抜き位置がおかしい不具合を修正
    ・タスクバーが左や上にある時に、ウィンドウ位置が正しく復元されない不具合を
      修正
    ・FAAD2 ライブラリを自前でコンパイルした最新版に差し替え

  ver.0.4.6
    ・番組表の取得時に、番組が表示されなかったり正しくない順番で表示されること
      がある不具合を修正
    ・パネルウィンドウを閉じると二度と表示されなくなる不具合を修正
    ・ステータスバーのビットレート表示がおかしい不具合を修正
    ・番組情報の曜日がおかしい不具合を修正
    ・タイトルバーの局名にゴミが出ることがある不具合を修正
    ・その他微修正

  ver.0.4.5
    ・情報ウィンドウをパネルウィンドウに変更し、以下の機能強化をした
      ・視聴中のチャンネルの番組表を表示できるようにした
      ・ちょっとした操作ができるようにした
      ・次の番組の情報を表示できるようにした
    ・ステータスバーに表示する項目をカスタマイズできるようにした
    ・ステータスバーに受信感度/番組名/時計の項目を表示できるようにした
    ・ウィンドウ位置を他のウィンドウの端にスナップできるようにした
    ・録画の設定を設定ダイアログに移動した
    ・タイトルバーを非表示にするとタスクバーのメニューが出なくなる不具合を修正
    ・その他微修正

  ver.0.4.4
    ・タイトルバーに局名を表示するようにした
    ・リモコンで音量とチャンネル以外はキーリピートが効かないようにした
    ・ホイールでのチャンネル切り替えの待ち時間を指定できるようにした
    ・新ドライバの場合は自前で計算したビットレートを表示するようにした
    ・設定ダイアログで OK された時に設定を保存するようにした
    ・キャプチャ画像の大きさの設定を保存するようにした
    ・起動時にステータスバーにトレースメッセージを表示するようにした
    ・クライアントエッジを外せるようにした
    ・ホイールのチャンネル切り替えを逆順にする設定ができなかった不具合を修正
    ・その他微修正

  ver.0.4.3
    ・カーソルがステータスバーの項目上にある時は、ホイールの機能をその項目に合
      わせるようにした
    ・キャプチャした画像をプレビューできるようにした
    ・キャプチャ時の画像サイズを選択できるようにした
    ・リモコンのメモボタンでキャプチャできるようにした
    ・キャプチャした画像ファイルに局名や日時などをコメントとして設定できるよう
      にした
    ・VMR9 でない時に偽 OSD 表示できるようにした
    ・キャプチャ時の切り抜き位置がおかしいことがある不具合を修正
    ・その他微修正/ちょっとした機能追加/コードの整理

  ver.0.4.2
    ・キャプチャ関係の機能強化
      ・VMR9 でなくてもキャプチャできるようにした
      ・ステータスバーにキャプチャアイコンを追加した
      ・ファイルへの保存ができるようにした
    ・タイトルバーを非表示にできるようにした
    ・ファンクションキー/テンキー/数字キーでのチャンネル切り替えをそれぞれ無効
      にできるようにした
    ・ホイールでのチャンネル切り替えの方向を逆にした
    ・その他微修正

  ver.0.4.1
    ・ホイールでチャンネル切り替えできるようにした
    ・録画中の終了で確認を取るオプションを追加
    ・画面をコピーした際に画像がおかしくなる不具合を修正
    ・ネットワークリモコン使用時に OSD のチャンネル表示がおかしい不具合を修正
    ・VMR9 を使用していない時に OSD 表示が有効になっていると不正な処理になる不
      具合を修正
    ・BonDriver_UDP を同梱した
    ・その他微修正

  ver.0.4.0
    ・情報ウィンドウで各種情報を表示できるようにした
    ・停止時間などを指定して録画できるようにした
    ・MPEG2 デコーダを指定できるようにした
    ・コマンドラインオプションで UDP のポートを指定できるようにした
    ・画面コピー時に変なサイズになる不具合を修正

  ver.0.3.9
    ・VMR9 使用時もパンスキャンできるようにした
    ・複数起動禁止のオプションが有効にならない不具合を修正
    ・ネットワークリモコンでのチャンネル切り替えが効かない時がある不具合を修正
    ・VMR9 時に表示倍率やアスペクト比を変えた際、前の画像が残る不具合を修正
    ・常に最前面表示が有効な状態で起動した時に、エラーのダイアログがウィンドウ
      の後ろに隠れる問題に対処

  ver.0.3.8
    ・VMR9 時に映像が切れる問題への暫定対処
    ・ホイールで音量を変更できるようにした
    ・ステータスバーを非表示にできるようにした
    ・複数起動を禁止できるようにした

  ver.0.3.7
    ・VMR9 はウィンドウレスモードを使用するようにした
    ・VMR9 使用時に画像をクリップボードにコピーできるようにした

  ver.0.3.6
    ・レンダラに VMR9 を指定できるようにした
    ・ネットワークリモコンを有効にするコマンドラインオプション /nr を追加
    ・ネットワークリモコンを使用した際、メニューからのチャンネル変更がうまくい
      かないことがある不具合を修正
    ・設定のスクリーンセーバーと省電力機能の無効化のチェック状態がおかしい不具
      合を修正

  ver.0.3.5
    ・設定をダイアログで行えるようにした
    ・ネットワークリモコンを使用した際、ステータスバーに局名が表示されるように
      した。また、メニューからチャンネルを選択できるようにした
    ・表示倍率を縦解像度基準に変更
    ・録画中のチャンネル変更で確認を取るオプションを追加
    ・複数起動できるように戻した
    ・その他微修正

  ver.0.3.4
    ・EpgDataCap_Bon から呼び出した際に、リモコンでチャンネルを切り替えられるよ
      うにした
    ・こっそりバージョン情報ダイアログを追加

  ver.0.3.3
    ・アスペクト比やパンスキャンを指定できるようにした
    ・メニューの現在の表示倍率にチェックが入るようにした
    ・R キーで録画開始/停止、S キーでステレオモード切替するようにした
    ・フルスクリーン時にメニューを表示した時に、カーソルが消えることがある不具
      合を修正

  ver.0.3.2
    ・ウィンドウのリサイズ時にアスペクト比に合わせられるようにした
    ・省電力機能の無効化をアクティブでなくてもできるようにした
      (SKNET MonsterTV HDUS Part13 スレの 866 氏に感謝)
    ・メニューが出ている時にメニューボタンを押すとメニューを閉じるようにした
    ・録画中のファイルを他のプログラムからも読めるようにした
    ・チャンネルを選択していなくても録画を開始できるように戻した

  ver.0.3.1
    ・BonDriver_UDP に対応した
    ・フルスクリーンの挙動がおかしかったので独自実装に変更
    ・数字キー及びファンクションキーでチャンネル切り替えできるようにした
    ・カーソルキーの上下で音量の上げ下げ、左右でチャンネルの切り替えをするよう
      にした
    ・エラーパケットと復号漏れパケットの数を表示するようにした
    ・起動時に前回終了時のチャンネルを表示する機能で、違うチャンネルが表示され
      てしまう不具合を修正
    ・クリックしてウィンドウをアクティブにした時に少し動く不具合を修正

  ver.0.3.0
    ・アクティブでない時もリモコンを使用できるようにした(制限あり)
    ・起動時に前回終了時のチャンネルを表示できるようにした
    ・画面部分をドラッグして移動できるようにした
    ・録画の部分は左クリックで録画開始/停止のトグルになるようにして、右クリック
      でメニューを出すようにした
    ・音声の部分は現在の音声が Stereo の場合、左クリックでステレオモードの切り
      替えになるようにした
    ・音量の部分を右クリックで消音になるようにした
    ・消音時に音量の部分をクリックすると、音は出るが消音のチェックが入ったまま
      になる不具合を修正
    ・その他微修正

  ver.0.2.0
    ・録画の際にファイル名に日時を付加できるようにした
    ・リセットできるようにした
    ・スクリーンセーバーとモニターの省電力機能を無効にできるようにした
    ・複数起動しないようにした
    ・常に最前面表示をしている場合にフルスクリーン表示するとウィンドウが前に出
      てしまう不具合を修正

  ver.0.1.1
    ・リモコンを使わないように設定できるようにした
    ・ダブルクリックで全画面表示できない不具合を修正
    ・チャンネルボタンの 10ch が機能しない不具合を修正

  ver.0.1.0
    ・初版


